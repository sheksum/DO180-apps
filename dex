issuer: http://dex:5556/dex

storage:
  type: memory

web:
  http: 0.0.0.0:5556

logger:
  level: info

connectors:
- type: ldap
  id: ipa
  name: FreeIPA
  config:
    host: cpeg-ipareplica.ipa.calix.local:636
    insecureNoSSL: false
    insecureSkipVerify: true

    bindDN: uid=svc_nginx_registry,cn=users,cn=accounts,dc=ipa,dc=calix,dc=local
    bindPW: "REDACTED"

    userSearch:
      baseDN: cn=users,cn=accounts,dc=ipa,dc=calix,dc=local
      filter: "(objectClass=person)"
      username: uid
      idAttr: uid
      emailAttr: mail
      nameAttr: cn

    groupSearch:
      baseDN: cn=groups,cn=accounts,dc=ipa,dc=calix,dc=local
      filter: "(objectClass=groupOfNames)"
      userMatchers:
        - userAttr: DN
          groupAttr: member
      nameAttr: cn

staticClients:
- id: registry-ui
  name: Docker Registry UI
  redirectURIs:
    - https://plnx-ai-registry.calix.local/oauth2/callback
  secret: ${DEX_CLIENT_SECRET}