#!/bin/bash

# Load environment variables and custom functions
source ~/.bash_profile

# Add SSH key
ssh-add -l >/dev/null 2>&1
if [ $? -ne 0 ]; then
    echo "Adding SSH key..."
    ssh-add ~/.ssh/id_ed25519
fi

# Initialize Kerberos ticket (if needed)
klist >/dev/null 2>&1
if [ $? -ne 0 ]; then
    echo "Initializing Kerberos ticket..."
    kdestory >/dev/null 2>&1
    kinit
fi

# Connect to remote workspace
WORKSPACE_HOST="workspace.vde-eoladipupo.de5.vrsn.com"
echo "Connecting to $WORKSPACE_HOST ..."
ssh -Ak "$WORKSPACE_HOST"

# Optional: Run ipa init script on login
./ipa_init.sh
