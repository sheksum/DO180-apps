#!/bin/bash

NAMESPACE="calico-system"
CMD="birdc show protocols all"

echo "=== Calico BGP Protocol Summary ==="

for pod in $(kubectl get pods -n $NAMESPACE -l k8s-app=calico-node -o jsonpath='{.items[*].metadata.name}'); do
  echo -e "\n>>> $pod <<<"
  kubectl exec -it -n $NAMESPACE "$pod" -- $CMD
done
