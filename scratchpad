══════════════════════════════════════════════════════════════
 OCP-AI PLATFORM — ARCHITECTURE OVERVIEW
══════════════════════════════════════════════════════════════
 OCP 4.20.13 | 5 Nodes | 640 cores | ~9.9 TiB
 8x H100L 94GB (752 GB GPU) | NetApp AFF | ArgoCD
══════════════════════════════════════════════════════════════


 CLUSTER — ocp-ai.calix.local
 ─────────────────────────────

 ┌─────────────────────────────────────────────────────┐
 │                   OCP-AI CLUSTER                     │
 │          VLAN 1510 — 10.172.248.0/24                │
 │     API VIP .155 | Ingress VIP .156                 │
 │                                                     │
 │  CONTROL PLANE (UCS-X Chassis, Slot 4)              │
 │  ┌─────────┐  ┌─────────┐  ┌─────────┐             │
 │  │master01 │  │master02 │  │master03 │             │
 │  │  .150   │  │  .151   │  │  .152   │             │
 │  │ 128c/2T │  │ 128c/2T │  │ 128c/2T │             │
 │  └────┬────┘  └────┬────┘  └────┬────┘             │
 │       │            │            │                   │
 │  eno5 (mgmt, br-ex) via FI-A/B                     │
 │  bnd0 (eno7+eno8) → 6 storage VLANs via FI → stor  │
 │                                                     │
 │  GPU WORKERS (Dell R760xa, rack servers)             │
 │  ┌─────────────────────┐ ┌─────────────────────┐   │
 │  │ gpu01    .153        │ │ gpu02    .154        │   │
 │  │ 128 HT | 2 TiB      │ │ 128 HT | 2 TiB      │   │
 │  │ ┌─────┐┌─────┐      │ │ ┌─────┐┌─────┐      │   │
 │  │ │H100L││H100L│      │ │ │H100L││H100L│      │   │
 │  │ └─────┘└─────┘      │ │ └─────┘└─────┘      │   │
 │  │ ┌─────┐┌─────┐      │ │ ┌─────┐┌─────┐      │   │
 │  │ │H100L││H100L│      │ │ │H100L││H100L│      │   │
 │  │ └─────┘└─────┘      │ │ └─────┘└─────┘      │   │
 │  │ = 376 GB GPU         │ │ = 376 GB GPU         │   │
 │  └──────────┬──────────┘ └──────────┬──────────┘   │
 │             │                       │               │
 │  eno8303 1G (current) via Leaf-3                    │
 │  Mellanox CX-6 100G x2 via Leaf-5/6 (LACP pending) │
 │                                                     │
 └─────────────────────────────────────────────────────┘


 NETWORK FABRIC
 ──────────────

 Masters:
   eno5/6 → FI-A/B → Storage Leaf Switches
   eno7/8 → FI-A/B → Storage Leaf Switches

 GPU Workers:
   eno8303 → Leaf-3 (1G mgmt, temporary)
   Mellanox → Leaf-5 + Leaf-6 (100G LACP pending)

 ┌─────────────────────────────────────────────────────┐
 │  VLAN 1510 — Management — 10.172.248.0/24           │
 ├─────────────────────────────────────────────────────┤
 │  Storage VLANs (masters on bnd0, GPU pending):      │
 │                                                     │
 │  Dev:  1792 Infra (192.0/23) | 1794 App (194.0/23) │
 │  Test: 1796 Infra (196.0/23) | 1798 App (198.0/23) │
 │  Prod: 1793 Infra (200.0/23) | 1797 App (202.0/23) │
 ├─────────────────────────────────────────────────────┤
 │  VLAN 1570 — SVM Management — 10.172.254.0/24      │
 └─────────────────────────────────────────────────────┘


 STORAGE
 ───────

 ┌─────────────────────────────────────────────────────┐
 │  NetApp AFF — plano_aff_cl — 6 Nodes                │
 │                                                     │
 │  ┌───────────────────┐  ┌───────────────────┐       │
 │  │  ocp_infra_svm    │  │  ocp_app_svm      │       │
 │  │                   │  │                   │       │
 │  │  Dev  VLAN 1792   │  │  Dev  VLAN 1794   │       │
 │  │  Test VLAN 1796   │  │  Test VLAN 1798   │       │
 │  │  Prod VLAN 1793   │  │  Prod VLAN 1797   │       │
 │  │                   │  │                   │       │
 │  │  Registry, logging│  │  Apps, databases  │       │
 │  │  monitoring       │  │  AI/ML workloads  │       │
 │  └───────────────────┘  └───────────────────┘       │
 └─────────────────────────────────────────────────────┘


 TRIDENT CSI
 ───────────

 ┌───────────────────┐         ┌───────────────────┐
 │ backend-infra-nfs │ ──────► │ netapp-infra       │
 │ ocp_infra_svm     │         │ (not default)      │
 └───────────────────┘         └───────────────────┘

 ┌───────────────────┐         ┌───────────────────┐
 │ backend-app-nfs   │ ──────► │ netapp-app         │
 │ ocp_app_svm       │         │ ★ DEFAULT          │
 └───────────────────┘         └───────────────────┘

 ontap-nas | NFS v4.1 | Reclaim: Retain


 PLATFORM SERVICES
 ─────────────────

 Bitbucket ──► ArgoCD ──► Cluster (App-of-Apps)
                          selfHeal: true

 Vault (pki_root → pki_int → leaf certs)
   └──► cert-manager (vault-issuer, Ready)

 ┌──────────────────┐ ┌──────────────────┐
 │ Operators:       │ │ MachineConfigs:  │
 │  NMState         │ │  99-worker-mtu   │
 │  Trident         │ │  99-master-chrony│
 │  NFD             │ │  99-worker-chrony│
 │  GPU Operator    │ └──────────────────┘
 │  cert-manager    │
 │  GitOps          │ GPU: 8x H100L Ready
 └──────────────────┘ ⚠ Taints pending


 AI/ML LAYER (Planned)
 ─────────────────────

 ┌───────┐ ┌───────┐ ┌───────┐ ┌───────────┐
 │ MinIO │ │Milvus │ │ CNPG  │ │ML Platform│
 │  S3   │ │Vector │ │Postgre│ │TBD Sulabh │
 └───────┘ └───────┘ └───────┘ └───────────┘
                     │
                     ▼
              GPU Workloads
           8x H100L = 752 GB


 TRAFFIC FLOW
 ────────────

 PVC (netapp-app)
   → Trident → backend-app-nfs
   → ocp_app_svm
   → Master mounts via storage VLAN on bnd0
   → Pod gets storage ✓

 GPU workers (current):
   → NFS via mgmt subnet (10.172.248.0/24)
   → Works but no dedicated storage path
   → Fix: Mellanox LACP + storage VLANs
