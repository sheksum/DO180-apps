import requests

# Replace with your actual NetBox URL and API token
url = "https://netbox.yourcompany.com/api/ipam/prefixes/?parent=50983"  # Focus on child prefixes under parent 50983
headers = {
    "Authorization": "Token YOUR_NETBOX_TOKEN"  # Replace with your NetBox token
}

# Send GET request to NetBox API
response = requests.get(url, headers=headers)

# Check the response status
if response.status_code == 200:
    print("Successfully connected to NetBox API!")

    # Parse the JSON response
    data = response.json()

    # Check if 'results' exists in the data
    if "results" in data:
        # Loop through each result (prefix) and display it
        for prefix in data["results"]:
            print(f"Prefix: {prefix['prefix']}")  # This will print the child IP blocks (prefixes)
    else:
        print("No child prefixes found under parent 50983.")
else:
    print(f"Failed to connect to NetBox API. Status code: {response.status_code}")
