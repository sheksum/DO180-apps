import requests

# Replace with your actual NetBox URL and API token
url = "https://netbox.vrsn.com/api/ipam/prefixes/50983/prefixes/"  # Endpoint for child prefixes
headers = {
    "Authorization": "Token <YOUR_NETBOX_TOKEN>"  # Replace with your NetBox token
}

# Send GET request to NetBox API to fetch child prefixes
response = requests.get(url, headers=headers)

# Check the response status
if response.status_code == 200:
    print("Successfully connected to NetBox API!")

    # Parse the JSON response
    data = response.json()

    # Check if 'results' exists in the response
    if "results" in data:
        print(f"Child Prefixes under 10.8.144.0/20:")
        # Loop through each child prefix
        for prefix in data["results"]:
            child_prefix_id = prefix["id"]  # Child prefix ID
            block = prefix["prefix"]        # IP block (e.g., 10.8.144.32/27)
            print(f"Child Prefix ID: {child_prefix_id}, Block: {block}")
    else:
        print("No child prefixes found.")
else:
    print(f"Failed to connect to NetBox API. Status code: {response.status_code}")
    print(f"Response Content: {response.text}")
