import requests

# Replace with your actual NetBox URL and API token
parent_prefix_id = 50983  # Parent prefix ID
url = f"https://netbox.yourcompany.com/api/ipam/prefixes/{parent_prefix_id}/prefixes/"  # Fetch child prefixes
headers = {
    "Authorization": "Token YOUR_NETBOX_TOKEN"  # Replace with your NetBox token
}

# Send GET request to NetBox API
response = requests.get(url, headers=headers)

# Check the response status
if response.status_code == 200:
    print("Successfully connected to NetBox API!")

    # Parse the JSON response
    data = response.json()

    # Check if 'results' exists in the data
    if "results" in data:
        # Loop through each child prefix and display it
        for prefix in data["results"]:
            print(f"Prefix: {prefix['prefix']}")  # This will print each child IP block (prefix)
    else:
        print("No child prefixes found under parent 50983.")
else:
    print(f"Failed to connect to NetBox API. Status code: {response.status_code}")
